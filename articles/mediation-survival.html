<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mediation Analysis for survival data â€¢ mets</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Mediation Analysis for survival data">
<meta property="og:description" content="mets">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-dutils.html">dUtility data-frame manipulations</a>
    </li>
    <li>
      <a href="../articles/binomial-family.html">Analysis of multivariate binomial data: family analysis</a>
    </li>
    <li>
      <a href="../articles/binomial-twin.html">Analysis of bivariate binomial data: Twin analysis</a>
    </li>
    <li>
      <a href="../articles/binreg-ate.html">Average treatment effect (ATE) for Competing risks and binary outcomes</a>
    </li>
    <li>
      <a href="../articles/binreg.html">Binomial Regression</a>
    </li>
    <li>
      <a href="../articles/cifreg.html">Cumulative Incidence Regression</a>
    </li>
    <li>
      <a href="../articles/haplo-discrete-ttp.html">Haplotype Discrete Survival Models</a>
    </li>
    <li>
      <a href="../articles/interval-discrete-survival.html">Discrete Interval Censored Survival Models</a>
    </li>
    <li>
      <a href="../articles/marginal-cox.html">Marginal modelling of clustered survival data</a>
    </li>
    <li>
      <a href="../articles/mediation-survival.html">Mediation Analysis for survival data</a>
    </li>
    <li>
      <a href="../articles/quantitative-twin.html">Twin models</a>
    </li>
    <li>
      <a href="../articles/recurrent-events.html">Recurrent events</a>
    </li>
    <li>
      <a href="../articles/time-to-event-family-studies-arev.html">A practical guide to Human Genetics with Lifetime Data</a>
    </li>
    <li>
      <a href="../articles/twostage-survival.html">Analysis of multivariate survival data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kkholst/mets/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Mediation Analysis for survival data</h1>
                        <h4 data-toc-skip class="author">Klaus Holst &amp; Thomas Scheike</h4>
            
            <h4 data-toc-skip class="date">2022-08-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/kkholst/mets/blob/HEAD/vignettes/mediation-survival.Rmd" class="external-link"><code>vignettes/mediation-survival.Rmd</code></a></small>
      <div class="hidden name"><code>mediation-survival.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Fit</p>
<ul>
<li>binomial-regression IPCW, binreg</li>
<li>additive Lin-Ying model, aalenMets</li>
<li>cox model phreg</li>
<li>standard logistic regression via binreg</li>
</ul>
<p>in the context of mediation analysis using mediation weights as in the medFlex package.</p>
<p>The mediator can</p>
<ul>
<li>binomial using glm-binomial.</li>
<li>multnomial via the mlogit function</li>
</ul>
<p>Both mediator and exposure must be coded as factors.</p>
<p>In the below example these are</p>
<ul>
<li>mediator: gp.f</li>
<li>exposure : dnr.f</li>
</ul>
<p>and the outcome model is concerned with the risk/hazard of cause=2.</p>
<p>The key is that the standard errors are computed using the i.i.d influence functions and a Taylor expansion to deal with the uncertainty from the mediation weights.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kkholst.github.io/mets/" class="external-link">mets</a></span><span class="op">)</span></span>
<span> <span class="va">runb</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>warn<span class="op">=</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span> <span class="co"># to control output in simulatins for p-values below.</span></span>
<span></span>
<span> <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">400</span>; <span class="va">k.boot</span> <span class="op">&lt;-</span> <span class="fl">100</span>; </span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binregATE.html">kumarsimRCT</a></span><span class="op">(</span><span class="va">n</span>,rho1<span class="op">=</span><span class="fl">0.5</span>,rho2<span class="op">=</span><span class="fl">0.5</span>,rct<span class="op">=</span><span class="fl">2</span>,censpar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>          beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.67</span>, <span class="fl">0.59</span>, <span class="fl">0.55</span>, <span class="fl">0.25</span>, <span class="fl">0.98</span>, <span class="fl">0.18</span>, <span class="fl">0.45</span>, <span class="fl">0.31</span><span class="op">)</span>,</span>
<span>    treatmodel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.18</span>, <span class="fl">0.56</span>, <span class="fl">0.56</span>, <span class="fl">0.54</span><span class="op">)</span>,restrict<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/drelevel.html">dfactor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">dnr.f</span><span class="op">~</span><span class="va">dnr</span></span>
<span><span class="fu"><a href="../reference/drelevel.html">dfactor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">gp.f</span><span class="op">~</span><span class="va">gp</span></span>
<span><span class="fu"><a href="../reference/dcut.html">drename</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ttt24</span><span class="op">~</span><span class="st">"ttt24*"</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">ftime</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre></div>
<p>Compute mediation weights based on fitted model</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weightmodel</span> <span class="op">&lt;-</span> <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">gp.f</span><span class="op">~</span><span class="va">dnr.f</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span>,data<span class="op">=</span><span class="va">dat</span>,family<span class="op">=</span><span class="va">binomial</span><span class="op">)</span></span>
<span><span class="va">wdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/medweight.html">medweight</a></span><span class="op">(</span><span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span>
<span></span>
<span><span class="va">aaMss2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">gp</span><span class="op">+</span><span class="va">dnr</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">dat</span>,time<span class="op">=</span><span class="fl">50</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss2</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    214</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.932279  0.219733 -1.362949 -0.501610  0.0000</span></span>
<span><span class="co">#&gt; gp           1.435290  0.247089  0.951003  1.919576  0.0000</span></span>
<span><span class="co">#&gt; dnr          0.085438  0.268034 -0.439900  0.610776  0.7499</span></span>
<span><span class="co">#&gt; preauto      0.426917  0.253432 -0.069800  0.923634  0.0921</span></span>
<span><span class="co">#&gt; ttt24        0.370901  0.271118 -0.160482  0.902283  0.1713</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.39366 0.25590 0.6056</span></span>
<span><span class="co">#&gt; gp           4.20086 2.58831 6.8181</span></span>
<span><span class="co">#&gt; dnr          1.08919 0.64410 1.8419</span></span>
<span><span class="co">#&gt; preauto      1.53253 0.93258 2.5184</span></span>
<span><span class="co">#&gt; ttt24        1.44904 0.85173 2.4652</span></span>
<span><span class="va">aaMss22</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">dat</span>,time<span class="op">=</span><span class="fl">50</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss22</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    214</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.254300  0.169923 -0.587342  0.078742  0.1345</span></span>
<span><span class="co">#&gt; dnr          0.275815  0.248320 -0.210884  0.762513  0.2667</span></span>
<span><span class="co">#&gt; preauto      0.522293  0.240045  0.051813  0.992772  0.0296</span></span>
<span><span class="co">#&gt; ttt24        0.541444  0.258381  0.035027  1.047861  0.0361</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.77546 0.55580 1.0819</span></span>
<span><span class="co">#&gt; dnr          1.31760 0.80987 2.1437</span></span>
<span><span class="co">#&gt; preauto      1.68589 1.05318 2.6987</span></span>
<span><span class="co">#&gt; ttt24        1.71849 1.03565 2.8515</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### binomial regression ###########################################################</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,time<span class="op">=</span><span class="fl">50</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    428</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.245862  0.170685 -0.580398  0.088674  0.1497</span></span>
<span><span class="co">#&gt; dnr.f01      0.079039  0.250436 -0.411806  0.569884  0.7523</span></span>
<span><span class="co">#&gt; dnr.f11      0.200088  0.032943  0.135521  0.264655  0.0000</span></span>
<span><span class="co">#&gt; preauto      0.495387  0.244456  0.016262  0.974512  0.0427</span></span>
<span><span class="co">#&gt; ttt24        0.534940  0.260962  0.023464  1.046415  0.0404</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.78203 0.55968 1.0927</span></span>
<span><span class="co">#&gt; dnr.f01      1.08225 0.66245 1.7681</span></span>
<span><span class="co">#&gt; dnr.f11      1.22151 1.14513 1.3030</span></span>
<span><span class="co">#&gt; preauto      1.64113 1.01639 2.6499</span></span>
<span><span class="co">#&gt; ttt24        1.70735 1.02374 2.8474</span></span>
<span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    428</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.245862  0.170391 -0.579823  0.088099  0.1490</span></span>
<span><span class="co">#&gt; dnr.f01      0.079039  0.239949 -0.391252  0.549330  0.7419</span></span>
<span><span class="co">#&gt; dnr.f11      0.200088  0.080364  0.042578  0.357598  0.0128</span></span>
<span><span class="co">#&gt; preauto      0.495387  0.245149  0.014904  0.975870  0.0433</span></span>
<span><span class="co">#&gt; ttt24        0.534940  0.261157  0.023082  1.046798  0.0405</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.78203 0.56000 1.0921</span></span>
<span><span class="co">#&gt; dnr.f01      1.08225 0.67621 1.7321</span></span>
<span><span class="co">#&gt; dnr.f11      1.22151 1.04350 1.4299</span></span>
<span><span class="co">#&gt; preauto      1.64113 1.01502 2.6535</span></span>
<span><span class="co">#&gt; ttt24        1.70735 1.02335 2.8485</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co">### lin-ying model ################################################################</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aalenMets.html">aalenMets</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span><span class="op">/</span><span class="fl">100</span>,<span class="va">status</span><span class="op">==</span><span class="fl">2</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span><span class="op">)</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;          Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; dnr.f01  0.318699  0.439340 -0.542392  1.179790  0.4682</span></span>
<span><span class="co">#&gt; dnr.f11  0.295059  0.126322  0.047472  0.542645  0.0195</span></span>
<span><span class="co">#&gt; preauto  0.862506  0.380731  0.116287  1.608725  0.0235</span></span>
<span><span class="co">#&gt; ttt24    1.063462  0.487256  0.108458  2.018467  0.0291</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.37534 0.58136 3.2537</span></span>
<span><span class="co">#&gt; dnr.f11  1.34321 1.04862 1.7206</span></span>
<span><span class="co">#&gt; preauto  2.36909 1.12332 4.9964</span></span>
<span><span class="co">#&gt; ttt24    2.89638 1.11456 7.5268</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co">### cox model ###############################################################################</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phreg.html">phreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">==</span><span class="fl">2</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;         Estimate     S.E.  dU^-1/2 P-value</span></span>
<span><span class="co">#&gt; dnr.f01 0.107465 0.142886 0.102697  0.4520</span></span>
<span><span class="co">#&gt; dnr.f11 0.121645 0.019319 0.095006  0.0000</span></span>
<span><span class="co">#&gt; preauto 0.366926 0.151224 0.104028  0.0153</span></span>
<span><span class="co">#&gt; ttt24   0.381095 0.149015 0.105819  0.0105</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.11345 0.84149 1.4733</span></span>
<span><span class="co">#&gt; dnr.f11  1.12935 1.08739 1.1729</span></span>
<span><span class="co">#&gt; preauto  1.44329 1.07308 1.9412</span></span>
<span><span class="co">#&gt; ttt24    1.46389 1.09311 1.9604</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;          Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; dnr.f01  0.107465  0.135906 -0.158906  0.373836  0.4291</span></span>
<span><span class="co">#&gt; dnr.f11  0.121645  0.048330  0.026920  0.216370  0.0118</span></span>
<span><span class="co">#&gt; preauto  0.366926  0.151346  0.070294  0.663558  0.0153</span></span>
<span><span class="co">#&gt; ttt24    0.381095  0.149163  0.088740  0.673449  0.0106</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.11345 0.85308 1.4533</span></span>
<span><span class="co">#&gt; dnr.f11  1.12935 1.02729 1.2416</span></span>
<span><span class="co">#&gt; preauto  1.44329 1.07282 1.9417</span></span>
<span><span class="co">#&gt; ttt24    1.46389 1.09280 1.9610</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co">### Fine-Gray #############################################################3</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cifreg.html">cifreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,propodds<span class="op">=</span><span class="cn">NULL</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;         Estimate     S.E.  dU^-1/2 P-value</span></span>
<span><span class="co">#&gt; dnr.f01 0.034903 0.144792 0.103066  0.8095</span></span>
<span><span class="co">#&gt; dnr.f11 0.128120 0.019312 0.095009  0.0000</span></span>
<span><span class="co">#&gt; preauto 0.273461 0.149496 0.103828  0.0674</span></span>
<span><span class="co">#&gt; ttt24   0.362530 0.149625 0.105874  0.0154</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.03552 0.77967 1.3753</span></span>
<span><span class="co">#&gt; dnr.f11  1.13669 1.09447 1.1805</span></span>
<span><span class="co">#&gt; preauto  1.31451 0.98065 1.7620</span></span>
<span><span class="co">#&gt; ttt24    1.43696 1.07173 1.9267</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;          Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; dnr.f01  0.034903  0.136658 -0.232941  0.302747  0.7984</span></span>
<span><span class="co">#&gt; dnr.f11  0.128120  0.050539  0.029066  0.227174  0.0112</span></span>
<span><span class="co">#&gt; preauto  0.273461  0.149912 -0.020361  0.567284  0.0681</span></span>
<span><span class="co">#&gt; ttt24    0.362530  0.149665  0.069192  0.655869  0.0154</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.03552 0.79220 1.3536</span></span>
<span><span class="co">#&gt; dnr.f11  1.13669 1.02949 1.2550</span></span>
<span><span class="co">#&gt; preauto  1.31451 0.97984 1.7635</span></span>
<span><span class="co">#&gt; ttt24    1.43696 1.07164 1.9268</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co">### logit model  #############################################################3</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cifreg.html">cifreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;          Estimate      S.E.   dU^-1/2 P-value</span></span>
<span><span class="co">#&gt; dnr.f01 0.0091874 0.2520698 0.1070144  0.9709</span></span>
<span><span class="co">#&gt; dnr.f11 0.1883732 0.0316634 0.0949777  0.0000</span></span>
<span><span class="co">#&gt; preauto 0.4809989 0.2175749 0.1013801  0.0271</span></span>
<span><span class="co">#&gt; ttt24   0.5011185 0.2506759 0.1081841  0.0456</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.00923 0.61578 1.6541</span></span>
<span><span class="co">#&gt; dnr.f11  1.20728 1.13464 1.2846</span></span>
<span><span class="co">#&gt; preauto  1.61769 1.05608 2.4780</span></span>
<span><span class="co">#&gt; ttt24    1.65057 1.00985 2.6978</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;           Estimate    Std.Err       2.5%      97.5% P-value</span></span>
<span><span class="co">#&gt; dnr.f01  0.0091874  0.2400952 -0.4613905  0.4797652  0.9695</span></span>
<span><span class="co">#&gt; dnr.f11  0.1883732  0.0758450  0.0397197  0.3370267  0.0130</span></span>
<span><span class="co">#&gt; preauto  0.4809989  0.2182593  0.0532186  0.9087792  0.0275</span></span>
<span><span class="co">#&gt; ttt24    0.5011185  0.2501107  0.0109106  0.9913264  0.0451</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.00923 0.63041 1.6157</span></span>
<span><span class="co">#&gt; dnr.f11  1.20728 1.04052 1.4008</span></span>
<span><span class="co">#&gt; preauto  1.61769 1.05466 2.4813</span></span>
<span><span class="co">#&gt; ttt24    1.65057 1.01097 2.6948</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co">### binomial outcome  ############################</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">ftime</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,time<span class="op">=</span><span class="fl">50</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,cens.weights<span class="op">=</span><span class="fl">1</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;               Estimate    Std.Err       2.5%      97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.2880577  0.1603938 -0.6024239  0.0263084  0.0725</span></span>
<span><span class="co">#&gt; dnr.f01      0.0384036  0.2246672 -0.4019361  0.4787433  0.8643</span></span>
<span><span class="co">#&gt; dnr.f11      0.1816005  0.0299270  0.1229447  0.2402563  0.0000</span></span>
<span><span class="co">#&gt; preauto      0.4349871  0.2231460 -0.0023712  0.8723453  0.0513</span></span>
<span><span class="co">#&gt; ttt24        0.5046269  0.2344764  0.0450617  0.9641921  0.0314</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.74972 0.54748 1.0267</span></span>
<span><span class="co">#&gt; dnr.f01      1.03915 0.66902 1.6140</span></span>
<span><span class="co">#&gt; dnr.f11      1.19914 1.13082 1.2716</span></span>
<span><span class="co">#&gt; preauto      1.54494 0.99763 2.3925</span></span>
<span><span class="co">#&gt; ttt24        1.65637 1.04609 2.6227</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  800    438</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  400 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.288058  0.159069 -0.599827  0.023711  0.0702</span></span>
<span><span class="co">#&gt; dnr.f01      0.038404  0.217532 -0.387951  0.464759  0.8599</span></span>
<span><span class="co">#&gt; dnr.f11      0.181600  0.101537 -0.017409  0.380610  0.0737</span></span>
<span><span class="co">#&gt; preauto      0.434987  0.221383  0.001085  0.868889  0.0494</span></span>
<span><span class="co">#&gt; ttt24        0.504627  0.232393  0.049144  0.960110  0.0299</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.74972 0.54891 1.0240</span></span>
<span><span class="co">#&gt; dnr.f01      1.03915 0.67845 1.5916</span></span>
<span><span class="co">#&gt; dnr.f11      1.19914 0.98274 1.4632</span></span>
<span><span class="co">#&gt; preauto      1.54494 1.00109 2.3843</span></span>
<span><span class="co">#&gt; ttt24        1.65637 1.05037 2.6120</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multinomial-regression">Multinomial regression<a class="anchor" aria-label="anchor" href="#multinomial-regression"></a>
</h2>
<p>Also works with mediator with more than two levels</p>
<ul>
<li>meditor: wmi in 4 categories</li>
<li>exposure: age in 4 categories</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">tTRACE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/dcut.html">dcut</a></span><span class="op">(</span><span class="va">tTRACE</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">.</span> </span>
<span></span>
<span><span class="va">weightmodel</span> <span class="op">&lt;-</span> <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mlogit.html">mlogit</a></span><span class="op">(</span><span class="va">wmicat.4</span> <span class="op">~</span><span class="va">agecat.4</span><span class="op">+</span><span class="va">vf</span><span class="op">+</span><span class="va">chf</span>,data<span class="op">=</span><span class="va">tTRACE</span>,family<span class="op">=</span><span class="va">binomial</span><span class="op">)</span></span>
<span><span class="va">wdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/medweight.html">medweight</a></span><span class="op">(</span><span class="va">fit</span>,data<span class="op">=</span><span class="va">tTRACE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">agecat.40</span><span class="op">+</span> <span class="va">agecat.41</span><span class="op">+</span> <span class="va">vf</span><span class="op">+</span><span class="va">chf</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,time<span class="op">=</span><span class="fl">7</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,cause<span class="op">=</span><span class="fl">9</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     n events</span></span>
<span><span class="co">#&gt;  4000   2016</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  1000 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;                       Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept)          -1.837886  0.174438 -2.179778 -1.495995  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(60.1,68.6]  0.911956  0.215331  0.489914  1.333998  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(68.6,75.6]  1.367813  0.216774  0.942943  1.792683  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(75.6,96.3]  2.284648  0.244466  1.805504  2.763792  0.0000</span></span>
<span><span class="co">#&gt; agecat.41(60.1,68.6]  0.121138  0.020590  0.080781  0.161494  0.0000</span></span>
<span><span class="co">#&gt; agecat.41(68.6,75.6]  0.119408  0.017715  0.084687  0.154129  0.0000</span></span>
<span><span class="co">#&gt; agecat.41(75.6,96.3]  0.095385  0.015042  0.065904  0.124866  0.0000</span></span>
<span><span class="co">#&gt; vf                    0.704175  0.297140  0.121790  1.286559  0.0178</span></span>
<span><span class="co">#&gt; chf                   1.162855  0.154209  0.860610  1.465099  0.0000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;                      Estimate    2.5%   97.5%</span></span>
<span><span class="co">#&gt; (Intercept)           0.15915 0.11307  0.2240</span></span>
<span><span class="co">#&gt; agecat.40(60.1,68.6]  2.48919 1.63218  3.7962</span></span>
<span><span class="co">#&gt; agecat.40(68.6,75.6]  3.92675 2.56753  6.0055</span></span>
<span><span class="co">#&gt; agecat.40(75.6,96.3]  9.82223 6.08304 15.8599</span></span>
<span><span class="co">#&gt; agecat.41(60.1,68.6]  1.12878 1.08413  1.1753</span></span>
<span><span class="co">#&gt; agecat.41(68.6,75.6]  1.12683 1.08838  1.1666</span></span>
<span><span class="co">#&gt; agecat.41(75.6,96.3]  1.10008 1.06812  1.1330</span></span>
<span><span class="co">#&gt; vf                    2.02218 1.12952  3.6203</span></span>
<span><span class="co">#&gt; chf                   3.19905 2.36460  4.3280</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">tTRACE</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     n events</span></span>
<span><span class="co">#&gt;  4000   2016</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  1000 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;                       Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept)          -1.837886  0.174671 -2.180236 -1.495537  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(60.1,68.6]  0.911956  0.223683  0.473545  1.350366  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(68.6,75.6]  1.367813  0.222395  0.931926  1.803699  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(75.6,96.3]  2.284648  0.250033  1.794592  2.774704  0.0000</span></span>
<span><span class="co">#&gt; agecat.41(60.1,68.6]  0.121138  0.053348  0.016578  0.225698  0.0232</span></span>
<span><span class="co">#&gt; agecat.41(68.6,75.6]  0.119408  0.053222  0.015095  0.223722  0.0249</span></span>
<span><span class="co">#&gt; agecat.41(75.6,96.3]  0.095385  0.053904 -0.010265  0.201035  0.0768</span></span>
<span><span class="co">#&gt; vf                    0.704175  0.295938  0.124147  1.284202  0.0173</span></span>
<span><span class="co">#&gt; chf                   1.162855  0.154843  0.859368  1.466342  0.0000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;                      Estimate    2.5%   97.5%</span></span>
<span><span class="co">#&gt; (Intercept)           0.15915 0.11301  0.2241</span></span>
<span><span class="co">#&gt; agecat.40(60.1,68.6]  2.48919 1.60568  3.8588</span></span>
<span><span class="co">#&gt; agecat.40(68.6,75.6]  3.92675 2.53940  6.0721</span></span>
<span><span class="co">#&gt; agecat.40(75.6,96.3]  9.82223 6.01702 16.0339</span></span>
<span><span class="co">#&gt; agecat.41(60.1,68.6]  1.12878 1.01672  1.2532</span></span>
<span><span class="co">#&gt; agecat.41(68.6,75.6]  1.12683 1.01521  1.2507</span></span>
<span><span class="co">#&gt; agecat.41(75.6,96.3]  1.10008 0.98979  1.2227</span></span>
<span><span class="co">#&gt; vf                    2.02218 1.13218  3.6118</span></span>
<span><span class="co">#&gt; chf                   3.19905 2.36167  4.3334</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sessioninfo">SessionInfo<a class="anchor" aria-label="anchor" href="#sessioninfo"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.2.1 (2022-06-23)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 20.04.4 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.9.0</span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.9.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">#&gt;  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">#&gt; [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] mets_1.3.0     lava_1.6.10    timereg_2.0.2  survival_3.3-1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] Rcpp_1.0.9          bslib_0.4.0         compiler_4.2.1     </span></span>
<span><span class="co">#&gt;  [4] jquerylib_0.1.4     tools_4.2.1         digest_0.6.29      </span></span>
<span><span class="co">#&gt;  [7] jsonlite_1.8.0      evaluate_0.15       memoise_2.0.1      </span></span>
<span><span class="co">#&gt; [10] lattice_0.20-45     rlang_1.0.4         Matrix_1.4-1       </span></span>
<span><span class="co">#&gt; [13] cli_3.3.0           parallel_4.2.1      yaml_2.3.5         </span></span>
<span><span class="co">#&gt; [16] mvtnorm_1.1-3       pkgdown_2.0.6       xfun_0.31          </span></span>
<span><span class="co">#&gt; [19] fastmap_1.1.0       stringr_1.4.0       knitr_1.39         </span></span>
<span><span class="co">#&gt; [22] desc_1.4.1          fs_1.5.2            sass_0.4.2         </span></span>
<span><span class="co">#&gt; [25] systemfonts_1.0.4   globals_0.15.1      rprojroot_2.0.3    </span></span>
<span><span class="co">#&gt; [28] grid_4.2.1          listenv_0.8.0       R6_2.5.1           </span></span>
<span><span class="co">#&gt; [31] textshaping_0.3.6   parallelly_1.32.1   future.apply_1.9.0 </span></span>
<span><span class="co">#&gt; [34] rmarkdown_2.14      purrr_0.3.4         magrittr_2.0.3     </span></span>
<span><span class="co">#&gt; [37] codetools_0.2-18    htmltools_0.5.3     splines_4.2.1      </span></span>
<span><span class="co">#&gt; [40] future_1.27.0       numDeriv_2016.8-1.1 ragg_1.2.2         </span></span>
<span><span class="co">#&gt; [43] stringi_1.7.8       cachem_1.0.6</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Klaus K. Holst, Thomas Scheike.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
