<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mediation Analysis for survival data â€¢ mets</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Mediation Analysis for survival data">
<meta property="og:description" content="mets">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-dutils.html">dUtility data-frame manipulations</a>
    </li>
    <li>
      <a href="../articles/binomial-family.html">Analysis of multivariate binomial data: family analysis</a>
    </li>
    <li>
      <a href="../articles/binomial-twin.html">Analysis of bivariate binomial data: Twin analysis</a>
    </li>
    <li>
      <a href="../articles/binreg-ate.html">Average treatment effect (ATE) for Competing risks and binary outcomes</a>
    </li>
    <li>
      <a href="../articles/binreg.html">Binomial Regression</a>
    </li>
    <li>
      <a href="../articles/cifreg.html">Cumulative Incidence Regression</a>
    </li>
    <li>
      <a href="../articles/haplo-discrete-ttp.html">Haplotype Discrete Survival Models</a>
    </li>
    <li>
      <a href="../articles/interval-discrete-survival.html">Discrete Interval Censored Survival Models</a>
    </li>
    <li>
      <a href="../articles/marginal-cox.html">Marginal modelling of clustered survival data</a>
    </li>
    <li>
      <a href="../articles/mediation-survival.html">Mediation Analysis for survival data</a>
    </li>
    <li>
      <a href="../articles/quantitative-twin.html">Twin models</a>
    </li>
    <li>
      <a href="../articles/recurrent-events.html">Recurrent events</a>
    </li>
    <li>
      <a href="../articles/rmst-ate.html">Average treatment effect (ATE) for Restricted mean survival and years lost of Competing risks</a>
    </li>
    <li>
      <a href="../articles/survival-ate.html">Average treatment effect (ATE) based on the Cox and Fine-Gray model</a>
    </li>
    <li>
      <a href="../articles/time-to-event-family-studies-arev.html">A practical guide to Human Genetics with Lifetime Data</a>
    </li>
    <li>
      <a href="../articles/twostage-survival.html">Analysis of multivariate survival data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kkholst/mets/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="mediation-survival_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Mediation Analysis for survival data</h1>
                        <h4 data-toc-skip class="author">Klaus Holst &amp; Thomas Scheike</h4>
            
            <h4 data-toc-skip class="date">2023-01-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/kkholst/mets/blob/HEAD/vignettes/mediation-survival.Rmd" class="external-link"><code>vignettes/mediation-survival.Rmd</code></a></small>
      <div class="hidden name"><code>mediation-survival.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Fit</p>
<ul>
<li>binomial-regression IPCW, binreg</li>
<li>additive Lin-Ying model, aalenMets</li>
<li>cox model phreg</li>
<li>standard logistic regression via binreg</li>
</ul>
<p>in the context of mediation analysis using mediation weights as in the medFlex package.</p>
<p>The mediator can</p>
<ul>
<li>binomial using glm-binomial.</li>
<li>multnomial via the mlogit function</li>
</ul>
<p>Both mediator and exposure must be coded as factors.</p>
<p>In the below example these are</p>
<ul>
<li>mediator: gp.f</li>
<li>exposure : dnr.f</li>
</ul>
<p>and the outcome model is concerned with the risk/hazard of cause=2.</p>
<p>The key is that the standard errors are computed using the i.i.d influence functions and a Taylor expansion to deal with the uncertainty from the mediation weights.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kkholst.github.io/mets/" class="external-link">mets</a></span><span class="op">)</span></span>
<span> <span class="va">runb</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>warn<span class="op">=</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span> <span class="co"># to control output in simulatins for p-values below.</span></span>
<span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">200</span>; <span class="va">k.boot</span> <span class="op">&lt;-</span> <span class="fl">10</span>; </span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binregATE.html">kumarsimRCT</a></span><span class="op">(</span><span class="va">n</span>,rho1<span class="op">=</span><span class="fl">0.5</span>,rho2<span class="op">=</span><span class="fl">0.5</span>,rct<span class="op">=</span><span class="fl">2</span>,censpar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>          beta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.67</span>, <span class="fl">0.59</span>, <span class="fl">0.55</span>, <span class="fl">0.25</span>, <span class="fl">0.98</span>, <span class="fl">0.18</span>, <span class="fl">0.45</span>, <span class="fl">0.31</span><span class="op">)</span>,</span>
<span>    treatmodel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.18</span>, <span class="fl">0.56</span>, <span class="fl">0.56</span>, <span class="fl">0.54</span><span class="op">)</span>,restrict<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/drelevel.html">dfactor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">dnr.f</span><span class="op">~</span><span class="va">dnr</span></span>
<span><span class="fu"><a href="../reference/drelevel.html">dfactor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">gp.f</span><span class="op">~</span><span class="va">gp</span></span>
<span><span class="fu"><a href="../reference/dcut.html">drename</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">ttt24</span><span class="op">~</span><span class="st">"ttt24*"</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">ftime</span> <span class="op">&lt;-</span> <span class="fl">1</span></span></code></pre></div>
<p>Compute mediation weights based on fitted model</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weightmodel</span> <span class="op">&lt;-</span> <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">gp.f</span><span class="op">~</span><span class="va">dnr.f</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span>,data<span class="op">=</span><span class="va">dat</span>,family<span class="op">=</span><span class="va">binomial</span><span class="op">)</span></span>
<span><span class="va">wdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/medweight.html">medweight</a></span><span class="op">(</span><span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span>
<span></span>
<span><span class="va">aaMss2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">gp</span><span class="op">+</span><span class="va">dnr</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">dat</span>,time<span class="op">=</span><span class="fl">50</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss2</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  200     97</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;             Estimate  Std.Err     2.5%    97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -1.09545  0.33261 -1.74736 -0.44355  0.0010</span></span>
<span><span class="co">#&gt; gp           1.26427  0.36725  0.54447  1.98407  0.0006</span></span>
<span><span class="co">#&gt; dnr          0.45202  0.39524 -0.32263  1.22667  0.2528</span></span>
<span><span class="co">#&gt; preauto      0.35124  0.38217 -0.39780  1.10028  0.3581</span></span>
<span><span class="co">#&gt; ttt24        0.55819  0.41228 -0.24987  1.36624  0.1758</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.33439 0.17423 0.6418</span></span>
<span><span class="co">#&gt; gp           3.54050 1.72370 7.2722</span></span>
<span><span class="co">#&gt; dnr          1.57148 0.72424 3.4099</span></span>
<span><span class="co">#&gt; preauto      1.42083 0.67180 3.0050</span></span>
<span><span class="co">#&gt; ttt24        1.74750 0.77890 3.9206</span></span>
<span><span class="va">aaMss22</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">dat</span>,time<span class="op">=</span><span class="fl">50</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss22</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  200     97</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.445508  0.257170 -0.949552  0.058536  0.0832</span></span>
<span><span class="co">#&gt; dnr          0.678218  0.381764 -0.070027  1.426462  0.0756</span></span>
<span><span class="co">#&gt; preauto      0.409926  0.359574 -0.294826  1.114677  0.2543</span></span>
<span><span class="co">#&gt; ttt24        0.479037  0.375065 -0.256077  1.214150  0.2015</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.64050 0.38691 1.0603</span></span>
<span><span class="co">#&gt; dnr          1.97036 0.93237 4.1639</span></span>
<span><span class="co">#&gt; preauto      1.50671 0.74466 3.0486</span></span>
<span><span class="co">#&gt; ttt24        1.61452 0.77408 3.3674</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### binomial regression ###########################################################</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,time<span class="op">=</span><span class="fl">50</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    194</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.520113  0.259635 -1.028987 -0.011238  0.0452</span></span>
<span><span class="co">#&gt; dnr.f01      0.339934  0.376813 -0.398605  1.078473  0.3670</span></span>
<span><span class="co">#&gt; dnr.f11      0.274655  0.071476  0.134564  0.414747  0.0001</span></span>
<span><span class="co">#&gt; preauto      0.552689  0.365370 -0.163423  1.268800  0.1304</span></span>
<span><span class="co">#&gt; ttt24        0.300601  0.380049 -0.444282  1.045483  0.4290</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.59445 0.35737 0.9888</span></span>
<span><span class="co">#&gt; dnr.f01      1.40486 0.67126 2.9402</span></span>
<span><span class="co">#&gt; dnr.f11      1.31608 1.14404 1.5140</span></span>
<span><span class="co">#&gt; preauto      1.73792 0.84923 3.5566</span></span>
<span><span class="co">#&gt; ttt24        1.35067 0.64128 2.8448</span></span>
<span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    194</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.520113  0.259239 -1.028211 -0.012014  0.0448</span></span>
<span><span class="co">#&gt; dnr.f01      0.339934  0.344113 -0.334515  1.014383  0.3232</span></span>
<span><span class="co">#&gt; dnr.f11      0.274655  0.117283  0.044785  0.504525  0.0192</span></span>
<span><span class="co">#&gt; preauto      0.552689  0.361565 -0.155966  1.261343  0.1264</span></span>
<span><span class="co">#&gt; ttt24        0.300601  0.381561 -0.447245  1.048447  0.4308</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.59445 0.35765 0.9881</span></span>
<span><span class="co">#&gt; dnr.f01      1.40486 0.71569 2.7577</span></span>
<span><span class="co">#&gt; dnr.f11      1.31608 1.04580 1.6562</span></span>
<span><span class="co">#&gt; preauto      1.73792 0.85559 3.5302</span></span>
<span><span class="co">#&gt; ttt24        1.35067 0.63939 2.8532</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co">### lin-ying model ################################################################</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aalenMets.html">aalenMets</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span><span class="op">/</span><span class="fl">100</span>,<span class="va">status</span><span class="op">==</span><span class="fl">2</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span><span class="op">)</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;          Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; dnr.f01  1.169577  0.739320 -0.279463  2.618617  0.1137</span></span>
<span><span class="co">#&gt; dnr.f11  0.207542  0.131751 -0.050685  0.465769  0.1152</span></span>
<span><span class="co">#&gt; preauto  0.617555  0.504304 -0.370862  1.605973  0.2207</span></span>
<span><span class="co">#&gt; ttt24    0.457719  0.517829 -0.557207  1.472645  0.3767</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%   97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  3.22063 0.75619 13.7167</span></span>
<span><span class="co">#&gt; dnr.f11  1.23065 0.95058  1.5932</span></span>
<span><span class="co">#&gt; preauto  1.85439 0.69014  4.9827</span></span>
<span><span class="co">#&gt; ttt24    1.58046 0.57281  4.3608</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co">### cox model ###############################################################################</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phreg.html">phreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">==</span><span class="fl">2</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;         Estimate     S.E.  dU^-1/2 P-value</span></span>
<span><span class="co">#&gt; dnr.f01 0.414502 0.213721 0.157231  0.0524</span></span>
<span><span class="co">#&gt; dnr.f11 0.100682 0.039337 0.144971  0.0105</span></span>
<span><span class="co">#&gt; preauto 0.284446 0.232174 0.162375  0.2205</span></span>
<span><span class="co">#&gt; ttt24   0.185567 0.226049 0.160886  0.4117</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.51362 0.99563 2.3011</span></span>
<span><span class="co">#&gt; dnr.f11  1.10592 1.02386 1.1946</span></span>
<span><span class="co">#&gt; preauto  1.32903 0.84315 2.0949</span></span>
<span><span class="co">#&gt; ttt24    1.20390 0.77300 1.8750</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;            Estimate     Std.Err        2.5%       97.5% P-value</span></span>
<span><span class="co">#&gt; dnr.f01  0.41450188  0.20869260  0.00547189  0.82353187  0.0470</span></span>
<span><span class="co">#&gt; dnr.f11  0.10068179  0.05123705  0.00025902  0.20110457  0.0494</span></span>
<span><span class="co">#&gt; preauto  0.28444642  0.23038059 -0.16709124  0.73598408  0.2169</span></span>
<span><span class="co">#&gt; ttt24    0.18556746  0.22550192 -0.25640818  0.62754311  0.4106</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.51362 1.00549 2.2785</span></span>
<span><span class="co">#&gt; dnr.f11  1.10592 1.00026 1.2228</span></span>
<span><span class="co">#&gt; preauto  1.32903 0.84612 2.0875</span></span>
<span><span class="co">#&gt; ttt24    1.20390 0.77383 1.8730</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co">### Fine-Gray #############################################################3</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cifreg.html">cifreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,propodds<span class="op">=</span><span class="cn">NULL</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;         Estimate     S.E.  dU^-1/2 P-value</span></span>
<span><span class="co">#&gt; dnr.f01 0.189343 0.219850 0.158549  0.3891</span></span>
<span><span class="co">#&gt; dnr.f11 0.187373 0.040836 0.145027  0.0000</span></span>
<span><span class="co">#&gt; preauto 0.414500 0.227838 0.160984  0.0689</span></span>
<span><span class="co">#&gt; ttt24   0.173048 0.228921 0.163080  0.4497</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.20846 0.78541 1.8594</span></span>
<span><span class="co">#&gt; dnr.f11  1.20608 1.11331 1.3066</span></span>
<span><span class="co">#&gt; preauto  1.51361 0.96845 2.3657</span></span>
<span><span class="co">#&gt; ttt24    1.18892 0.75910 1.8621</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;          Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; dnr.f01  0.189343  0.200074 -0.202795  0.581482  0.3440</span></span>
<span><span class="co">#&gt; dnr.f11  0.187373  0.075422  0.039548  0.335198  0.0130</span></span>
<span><span class="co">#&gt; preauto  0.414500  0.224302 -0.025124  0.854123  0.0646</span></span>
<span><span class="co">#&gt; ttt24    0.173048  0.229937 -0.277620  0.623717  0.4517</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.20846 0.81645 1.7887</span></span>
<span><span class="co">#&gt; dnr.f11  1.20608 1.04034 1.3982</span></span>
<span><span class="co">#&gt; preauto  1.51361 0.97519 2.3493</span></span>
<span><span class="co">#&gt; ttt24    1.18892 0.75758 1.8659</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co">### logit model  #############################################################3</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cifreg.html">cifreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;         Estimate     S.E.  dU^-1/2 P-value</span></span>
<span><span class="co">#&gt; dnr.f01 0.357164 0.339839 0.158937  0.2933</span></span>
<span><span class="co">#&gt; dnr.f11 0.272389 0.064148 0.145076  0.0000</span></span>
<span><span class="co">#&gt; preauto 0.657009 0.326087 0.160361  0.0439</span></span>
<span><span class="co">#&gt; ttt24   0.191334 0.353607 0.167443  0.5884</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.42927 0.73425 2.7822</span></span>
<span><span class="co">#&gt; dnr.f11  1.31310 1.15796 1.4890</span></span>
<span><span class="co">#&gt; preauto  1.92901 1.01805 3.6551</span></span>
<span><span class="co">#&gt; ttt24    1.21086 0.60549 2.4215</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;          Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; dnr.f01  0.357164  0.317638 -0.265395  0.979723  0.2608</span></span>
<span><span class="co">#&gt; dnr.f11  0.272389  0.111281  0.054283  0.490495  0.0144</span></span>
<span><span class="co">#&gt; preauto  0.657009  0.322616  0.024693  1.289325  0.0417</span></span>
<span><span class="co">#&gt; ttt24    0.191334  0.356870 -0.508119  0.890787  0.5919</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;         Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; dnr.f01  1.42927 0.76690 2.6637</span></span>
<span><span class="co">#&gt; dnr.f11  1.31310 1.05578 1.6331</span></span>
<span><span class="co">#&gt; preauto  1.92901 1.02500 3.6303</span></span>
<span><span class="co">#&gt; ttt24    1.21086 0.60163 2.4370</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span>
<span></span>
<span><span class="co">### binomial outcome  ############################</span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">ftime</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">dnr.f0</span><span class="op">+</span><span class="va">dnr.f1</span><span class="op">+</span><span class="va">preauto</span><span class="op">+</span><span class="va">ttt24</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,time<span class="op">=</span><span class="fl">50</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,cens.weights<span class="op">=</span><span class="fl">1</span>,cause<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.674433  0.235285 -1.135583 -0.213284  0.0042</span></span>
<span><span class="co">#&gt; dnr.f01      0.221834  0.318264 -0.401952  0.845620  0.4858</span></span>
<span><span class="co">#&gt; dnr.f11      0.262722  0.060281  0.144572  0.380871  0.0000</span></span>
<span><span class="co">#&gt; preauto      0.578077  0.319091 -0.047331  1.203484  0.0700</span></span>
<span><span class="co">#&gt; ttt24        0.214442  0.328183 -0.428784  0.857669  0.5135</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.50944 0.32123 0.8079</span></span>
<span><span class="co">#&gt; dnr.f01      1.24836 0.66901 2.3294</span></span>
<span><span class="co">#&gt; dnr.f11      1.30046 1.15555 1.4636</span></span>
<span><span class="co">#&gt; preauto      1.78261 0.95377 3.3317</span></span>
<span><span class="co">#&gt; ttt24        1.23917 0.65130 2.3577</span></span>
<span><span class="va">ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ll</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    n events</span></span>
<span><span class="co">#&gt;  400    196</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  200 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;              Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept) -0.674433  0.235017 -1.135059 -0.213808  0.0041</span></span>
<span><span class="co">#&gt; dnr.f01      0.221834  0.286742 -0.340169  0.783837  0.4391</span></span>
<span><span class="co">#&gt; dnr.f11      0.262722  0.107720  0.051595  0.473848  0.0147</span></span>
<span><span class="co">#&gt; preauto      0.578077  0.315244 -0.039789  1.195943  0.0667</span></span>
<span><span class="co">#&gt; ttt24        0.214442  0.329103 -0.430589  0.859473  0.5147</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;             Estimate    2.5%  97.5%</span></span>
<span><span class="co">#&gt; (Intercept)  0.50944 0.32140 0.8075</span></span>
<span><span class="co">#&gt; dnr.f01      1.24836 0.71165 2.1899</span></span>
<span><span class="co">#&gt; dnr.f11      1.30046 1.05295 1.6062</span></span>
<span><span class="co">#&gt; preauto      1.78261 0.96099 3.3067</span></span>
<span><span class="co">#&gt; ttt24        1.23917 0.65013 2.3619</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">runb</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span> <span class="va">bll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">BootmediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">dat</span>,k.boot<span class="op">=</span><span class="va">k.boot</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bll</span><span class="op">)</span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multinomial-regression">Multinomial regression<a class="anchor" aria-label="anchor" href="#multinomial-regression"></a>
</h2>
<p>Also works with mediator with more than two levels</p>
<ul>
<li>meditor: wmi in 4 categories</li>
<li>exposure: age in 4 categories</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">tTRACE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/dcut.html">dcut</a></span><span class="op">(</span><span class="va">tTRACE</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">.</span> </span>
<span></span>
<span><span class="va">weightmodel</span> <span class="op">&lt;-</span> <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mlogit.html">mlogit</a></span><span class="op">(</span><span class="va">wmicat.4</span> <span class="op">~</span><span class="va">agecat.4</span><span class="op">+</span><span class="va">vf</span><span class="op">+</span><span class="va">chf</span>,data<span class="op">=</span><span class="va">tTRACE</span>,family<span class="op">=</span><span class="va">binomial</span><span class="op">)</span></span>
<span><span class="va">wdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/medweight.html">medweight</a></span><span class="op">(</span><span class="va">fit</span>,data<span class="op">=</span><span class="va">tTRACE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">aaMss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/binreg.html">binreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/timereg/man/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">agecat.40</span><span class="op">+</span> <span class="va">agecat.41</span><span class="op">+</span> <span class="va">vf</span><span class="op">+</span><span class="va">chf</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/cluster.html" class="external-link">cluster</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>,data<span class="op">=</span><span class="va">wdata</span>,time<span class="op">=</span><span class="fl">7</span>,weights<span class="op">=</span><span class="va">wdata</span><span class="op">$</span><span class="va">weights</span>,cause<span class="op">=</span><span class="fl">9</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">aaMss</span><span class="op">)</span></span>
<span><span class="va">MultMed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mediatorSurv.html">mediatorSurv</a></span><span class="op">(</span><span class="va">aaMss</span>,<span class="va">fit</span>,data<span class="op">=</span><span class="va">tTRACE</span>,wdata<span class="op">=</span><span class="va">wdata</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">MultMed</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     n events</span></span>
<span><span class="co">#&gt;  4000   2016</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  1000 clusters</span></span>
<span><span class="co">#&gt; coeffients:</span></span>
<span><span class="co">#&gt;                       Estimate   Std.Err      2.5%     97.5% P-value</span></span>
<span><span class="co">#&gt; (Intercept)          -1.837886  0.174671 -2.180236 -1.495537  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(60.1,68.6]  0.911956  0.223683  0.473545  1.350366  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(68.6,75.6]  1.367813  0.222395  0.931926  1.803699  0.0000</span></span>
<span><span class="co">#&gt; agecat.40(75.6,96.3]  2.284648  0.250033  1.794592  2.774704  0.0000</span></span>
<span><span class="co">#&gt; agecat.41(60.1,68.6]  0.121138  0.053348  0.016578  0.225698  0.0232</span></span>
<span><span class="co">#&gt; agecat.41(68.6,75.6]  0.119408  0.053222  0.015095  0.223722  0.0249</span></span>
<span><span class="co">#&gt; agecat.41(75.6,96.3]  0.095385  0.053904 -0.010265  0.201035  0.0768</span></span>
<span><span class="co">#&gt; vf                    0.704175  0.295938  0.124147  1.284202  0.0173</span></span>
<span><span class="co">#&gt; chf                   1.162855  0.154843  0.859368  1.466342  0.0000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; exp(coeffients):</span></span>
<span><span class="co">#&gt;                      Estimate    2.5%   97.5%</span></span>
<span><span class="co">#&gt; (Intercept)           0.15915 0.11301  0.2241</span></span>
<span><span class="co">#&gt; agecat.40(60.1,68.6]  2.48919 1.60568  3.8588</span></span>
<span><span class="co">#&gt; agecat.40(68.6,75.6]  3.92675 2.53940  6.0721</span></span>
<span><span class="co">#&gt; agecat.40(75.6,96.3]  9.82223 6.01702 16.0339</span></span>
<span><span class="co">#&gt; agecat.41(60.1,68.6]  1.12878 1.01672  1.2532</span></span>
<span><span class="co">#&gt; agecat.41(68.6,75.6]  1.12683 1.01521  1.2507</span></span>
<span><span class="co">#&gt; agecat.41(75.6,96.3]  1.10008 0.98979  1.2227</span></span>
<span><span class="co">#&gt; vf                    2.02218 1.13218  3.6118</span></span>
<span><span class="co">#&gt; chf                   3.19905 2.36167  4.3334</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sessioninfo">SessionInfo<a class="anchor" aria-label="anchor" href="#sessioninfo"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.2.2 (2022-10-31)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 22.04.1 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3</span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">#&gt;  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">#&gt; [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] mets_1.3.2     timereg_2.0.4  survival_3.4-0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] Rcpp_1.0.9          bslib_0.4.2         compiler_4.2.2     </span></span>
<span><span class="co">#&gt;  [4] jquerylib_0.1.4     tools_4.2.2         digest_0.6.31      </span></span>
<span><span class="co">#&gt;  [7] jsonlite_1.8.4      evaluate_0.19       memoise_2.0.1      </span></span>
<span><span class="co">#&gt; [10] lifecycle_1.0.3     lattice_0.20-45     rlang_1.0.6        </span></span>
<span><span class="co">#&gt; [13] Matrix_1.5-1        cli_3.6.0           parallel_4.2.2     </span></span>
<span><span class="co">#&gt; [16] yaml_2.3.6          mvtnorm_1.1-3       pkgdown_2.0.7      </span></span>
<span><span class="co">#&gt; [19] xfun_0.36           fastmap_1.1.0       stringr_1.5.0      </span></span>
<span><span class="co">#&gt; [22] knitr_1.41          desc_1.4.2          fs_1.5.2           </span></span>
<span><span class="co">#&gt; [25] vctrs_0.5.1         sass_0.4.4          systemfonts_1.0.4  </span></span>
<span><span class="co">#&gt; [28] globals_0.16.2      rprojroot_2.0.3     grid_4.2.2         </span></span>
<span><span class="co">#&gt; [31] glue_1.6.2          listenv_0.9.0       R6_2.5.1           </span></span>
<span><span class="co">#&gt; [34] textshaping_0.3.6   parallelly_1.34.0   future.apply_1.10.0</span></span>
<span><span class="co">#&gt; [37] rmarkdown_2.19      lava_1.7.1          purrr_1.0.1        </span></span>
<span><span class="co">#&gt; [40] magrittr_2.0.3      codetools_0.2-18    htmltools_0.5.4    </span></span>
<span><span class="co">#&gt; [43] splines_4.2.2       future_1.30.0       numDeriv_2016.8-1.1</span></span>
<span><span class="co">#&gt; [46] ragg_1.2.5          stringi_1.7.12      cachem_1.0.6</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Klaus K. Holst, Thomas Scheike.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
