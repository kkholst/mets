<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg • mets</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg"><meta name="description" content="Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence."><meta property="og:description" content="Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence."><meta property="og:image" content="http://kkholst.github.io/mets/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basic-dutils.html">dUtility data-frame manipulations</a></li>
    <li><a class="dropdown-item" href="../articles/binomial-family.html">Analysis of multivariate binomial data: family analysis</a></li>
    <li><a class="dropdown-item" href="../articles/binomial-twin.html">Analysis of bivariate binomial data: Twin analysis</a></li>
    <li><a class="dropdown-item" href="../articles/binreg-ate.html">Average treatment effect (ATE) for Competing risks and binary outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/binreg-TRS.html">Two-Stage Randomization for for Competing risks and Survival outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/binreg.html">Binomial Regression for Survival and Competing Risks Data</a></li>
    <li><a class="dropdown-item" href="../articles/cifreg.html">Cumulative Incidence Regression</a></li>
    <li><a class="dropdown-item" href="../articles/cooking-survival-data.html">WIP: Cooking survival data, 5 minute recipes</a></li>
    <li><a class="dropdown-item" href="../articles/cumulative-cost.html">IPCW Cumulative Cost</a></li>
    <li><a class="dropdown-item" href="../articles/glm-utility.html">GEE cluster standard errors and predictions for glm objects</a></li>
    <li><a class="dropdown-item" href="../articles/haplo-discrete-ttp.html">Haplotype Discrete Survival Models</a></li>
    <li><a class="dropdown-item" href="../articles/interval-discrete-survival.html">Discrete Interval Censored Survival Models</a></li>
    <li><a class="dropdown-item" href="../articles/marginal-cox.html">Marginal modelling of clustered survival data</a></li>
    <li><a class="dropdown-item" href="../articles/mediation-survival.html">Mediation Analysis for survival data</a></li>
    <li><a class="dropdown-item" href="../articles/phreg_rct.html">Randomization for Cox Type rate models </a></li>
    <li><a class="dropdown-item" href="../articles/quantitative-twin.html">Twin models</a></li>
    <li><a class="dropdown-item" href="../articles/recurrent-events.html">Recurrent events</a></li>
    <li><a class="dropdown-item" href="../articles/rmst-ate.html">Average treatment effect (ATE) for Restricted mean survival and years lost of Competing risks</a></li>
    <li><a class="dropdown-item" href="../articles/survival-ate.html">G-Computation or standardization for the Cox, Fine-Gray and binomial regression models for survival data</a></li>
    <li><a class="dropdown-item" href="../articles/time-to-event-family-studies-arev.html">A practical guide to Human Genetics with Lifetime Data</a></li>
    <li><a class="dropdown-item" href="../articles/twostage-survival.html">Analysis of multivariate survival data</a></li>
    <li><a class="dropdown-item" href="../articles/while-alive.html">While Alive estimands for Recurrent Events</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kkholst/mets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors</h1>
      <small class="dont-index">Source: <a href="https://github.com/kkholst/mets/blob/main/R/phreg.R" class="external-link"><code>R/phreg.R</code></a></small>
      <div class="d-none name"><code>resmean.phreg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">x</span>, times <span class="op">=</span> <span class="cn">NULL</span>, covs <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>phreg object</p></dd>


<dt id="arg-times">times<a class="anchor" aria-label="anchor" href="#arg-times"></a></dt>
<dd><p>possible times for which to report restricted mean</p></dd>


<dt id="arg-covs">covs<a class="anchor" aria-label="anchor" href="#arg-covs"></a></dt>
<dd><p>possible covariate for Cox model</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to lower level funtions</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Thomas Scheike</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kkholst.github.io/mets/" class="external-link">mets</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">)</span>; <span class="va">bmt</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="va">bmt</span><span class="op">$</span><span class="va">time</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">408</span><span class="op">)</span><span class="op">*</span><span class="fl">0.001</span></span></span>
<span class="r-in"><span><span class="va">out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="phreg.html">phreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rm1</span> <span class="op">&lt;-</span> <span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">out1</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">rm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       strata times     rmean  se.rmean     lower     upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0        0    10  5.863343 0.2565969  5.381388  6.388463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1        1    10  7.631912 0.3423881  6.989500  8.333367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0        2    10  7.277574 0.7092954  6.012095  8.809422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1        3    10  7.670141 0.5624556  6.643307  8.855691</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1      0    20  9.888956 0.5393853  8.886328 11.004709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1      1    20 13.506402 0.8000279 12.025973 15.169075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1      2    20 12.103008 1.5545678  9.409379 15.567744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1      3    20 12.787705 1.4675869 10.211842 16.013312</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2      0    30 13.602944 0.8315415 12.067001 15.334388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2      1    30 18.901242 1.2693320 16.570173 21.560242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2      2    30 16.191174 2.4006207 12.108018 21.651283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2      3    30 17.766060 2.4422086 13.570031 23.259556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3      0    40 17.159956 1.1235963 15.093201 19.509717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3      1    40 23.883637 1.7373039 20.710175 27.543375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3      2    40 19.549213 3.2030923 14.179532 26.952350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3      3    40 22.433331 3.3838515 16.691610 30.150138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4      0    50 20.482470 1.4110537 17.895439 23.443490</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4      1    50 28.330687 2.1961768 24.337306 32.979320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4      2    50 22.746016 4.0537083 16.040114 32.255460</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4      3    50 26.115632 4.2306906 19.011101 35.875159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5      0    60 23.741477 1.7038099 20.626292 27.327148</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5      1    60 32.771213 2.6865780 27.906873 38.483438</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5      2    60 25.942819 4.9476027 17.851839 37.700870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5      3    60 29.671600 5.1599202 21.101639 41.722060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       years.lost</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0     4.136657</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1     2.368088</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0     2.722426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1     2.329859</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1  10.111044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1   6.493598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1   7.896992</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1   7.212295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2  16.397056</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2  11.098758</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2  13.808826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2  12.233940</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3  22.840044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3  16.116363</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3  20.450787</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3  17.566669</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4  29.517530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4  21.669313</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4  27.253984</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4  23.884368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5  36.258523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5  27.228787</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5  34.057181</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5  30.328400</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,years.lost<span class="op">=</span><span class="cn">TRUE</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="resmean.phreg-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## comparing populations, can also be done using rmstIPCW via influence functions</span></span></span>
<span class="r-in"><span><span class="va">rm1</span> <span class="op">&lt;-</span> <span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">out1</span>,times<span class="op">=</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e1</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">rm1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Estimate Std.Err  2.5% 97.5%   P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p1    17.16   1.124 14.96 19.36 1.169e-52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p2    23.88   1.737 20.48 27.29 5.270e-43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p3    19.55   3.203 13.27 25.83 1.039e-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p4    22.43   3.384 15.80 29.07 3.368e-11</span>
<span class="r-in"><span><span class="fu"><a href="http://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">e1</span>,<span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std.Err   2.5%  97.5%  P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [p1] - [p2]   -6.724   2.069 -10.78 -2.669 0.001155</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Null Hypothesis: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [p1] - [p2] = 0 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## years.lost decomposed into causes</span></span></span>
<span class="r-in"><span><span class="va">drm1</span> <span class="op">&lt;-</span> <span class="fu">cif.yearslost</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">drm1</span>,cause<span class="op">=</span><span class="fl">1</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">drm1</span>,cause<span class="op">=</span><span class="fl">2</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span>;</span></span>
<span class="r-plt img"><img src="resmean.phreg-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       strata times    intF_1     intF_2 se.intF_1 se.intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0        0    10  3.117728  1.0189288 0.2487176 0.1703638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1        1    10  1.710936  0.6571526 0.3238412 0.1870601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0        2    10  1.876143  0.8462836 0.6339082 0.4726466</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1        3    10  1.358636  0.9712223 0.5303228 0.3617247</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1      0    20  7.517571  2.5934726 0.5441135 0.3861255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1      1    20  4.230955  2.2626433 0.7414105 0.5327638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1      2    20  4.568450  3.3285417 1.4876793 1.1718383</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1      3    20  3.569521  3.6427738 1.3003137 1.1906605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2      0    30 12.105134  4.2919224 0.8508105 0.6161428</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2      1    30  6.884188  4.2145701 1.1741030 0.9057072</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2      2    30  7.260758  6.5480678 2.3532886 1.9703396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2      3    30  5.780405  6.4535344 2.0925102 2.0815222</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3      0    40 16.718644  6.1214006 1.1626277 0.8509971</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3      1    40  9.728017  6.3883460 1.6094995 1.2998361</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3      2    40  9.953066 10.4977217 3.2212066 2.8144091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3      3    40  8.302374  9.2642951 2.8718027 2.9840891</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4      0    50 21.367828  8.1497025 1.4766462 1.0945185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4      1    50 12.979249  8.6900648 2.0475172 1.7124440</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4      2    50 12.645373 14.6086108 4.0899639 3.7302613</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4      3    50 11.809312 12.0750558 3.6736890 3.8902225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5      0    60 26.017012 10.2415106 1.7930406 1.3471492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5      1    60 16.237003 10.9917837 2.5097421 2.1389931</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5      2    60 15.337681 18.7194999 4.9591193 4.6873851</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5      3    60 15.442583 14.8858164 4.5899631 4.7979021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       total.years.lost lower_intF_1 upper_intF_1 lower_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0           4.136657    2.6664497     3.645382    0.7342160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1           2.368088    1.1806486     2.479401    0.3761574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0           2.722426    0.9675272     3.638049    0.2832191</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1           2.329859    0.6321933     2.919824    0.4680527</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1        10.111044    6.5233175     8.663364    1.9370986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1         6.493598    3.0010849     5.964836    1.4262364</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1         7.896992    2.4131367     8.648800    1.6694832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1         7.212295    1.7479626     7.289331    1.9196070</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2        16.397056   10.5473368    13.893011    3.2393246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2        11.098758    4.9281026     9.616693    2.7658642</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2        13.808826    3.8467904    13.704570    3.6306405</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2        12.233940    2.8433007    11.751512    3.4296609</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3        22.840044   14.5884049    19.159946    4.6614042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3        16.116363    7.0338498    13.454127    4.2874053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3        20.450787    5.2780598    18.768926    6.2071231</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3        17.566669    4.2147370    16.354380    4.9275936</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4        29.517530   18.6610983    24.467159    6.2635995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4        21.669313    9.5272998    17.681914    5.9059153</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4        27.253984    6.7084592    23.836393    8.8564030</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4        23.884368    6.4184377    21.728005    6.4218095</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5        36.258523   22.7297314    29.779715    7.9140457</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5        27.228787   11.9932328    21.982420    7.5062836</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5        34.057181    8.1384451    28.905332   11.4591489</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5        30.328400    8.6242095    27.651622    7.9144140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       upper_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0       1.414047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1       1.148055</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0       2.528769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1       2.015313</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1     3.472255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1     3.589556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1     6.636299</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1     6.912770</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2     5.686555</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2     6.422080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2    11.809815</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2    12.143506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3     8.038682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3     9.518803</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3    17.754145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3    17.417663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4    10.603751</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4    12.786710</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4    24.096861</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4    22.704967</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5    13.253467</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5    16.095756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5    30.579904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5    27.997971</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## comparing populations, can also be done using rmstIPCW via influence functions</span></span></span>
<span class="r-in"><span><span class="va">drm1</span> <span class="op">&lt;-</span> <span class="fu">cif.yearslost</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span>,times<span class="op">=</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     strata times    intF_1    intF_2 se.intF_1 se.intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0      0    40 16.718644  6.121401  1.162628 0.8509971</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1      1    40  9.728017  6.388346  1.609500 1.2998361</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0      2    40  9.953066 10.497722  3.221207 2.8144091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1      3    40  8.302374  9.264295  2.871803 2.9840891</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     total.years.lost lower_intF_1 upper_intF_1 lower_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0         22.84004    14.588405     19.15995     4.661404</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1         16.11636     7.033850     13.45413     4.287405</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0         20.45079     5.278060     18.76893     6.207123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1         17.56667     4.214737     16.35438     4.927594</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     upper_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0     8.038682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1     9.518803</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0    17.754145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1    17.417663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## first cause </span></span></span>
<span class="r-in"><span><span class="va">e1</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="http://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">e1</span>,<span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std.Err  2.5% 97.5%   P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [p1] - [p2]    6.991   1.985 3.099 10.88 0.0004302</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Null Hypothesis: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [p1] - [p2] = 0 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Klaus K. Holst, Thomas Scheike.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

