<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg • mets</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg"><meta property="og:description" content="Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale 
standard error. Standard error is computed using linear interpolation between 
standard errors at jump-times. Plots gives restricted mean at all times. 
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on  
integrating the cumulative incidence functions.  
One particular feature of these functions are that the restricted mean and years-lost are 
computed for all event times as functions and can be viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of 
cumulative incidence."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/basic-dutils.html">dUtility data-frame manipulations</a>
    </li>
    <li>
      <a href="../articles/binomial-family.html">Analysis of multivariate binomial data: family analysis</a>
    </li>
    <li>
      <a href="../articles/binomial-twin.html">Analysis of bivariate binomial data: Twin analysis</a>
    </li>
    <li>
      <a href="../articles/binreg-ate.html">Average treatment effect (ATE) for Competing risks and binary outcomes</a>
    </li>
    <li>
      <a href="../articles/binreg.html">Binomial Regression</a>
    </li>
    <li>
      <a href="../articles/cifreg.html">Cumulative Incidence Regression</a>
    </li>
    <li>
      <a href="../articles/haplo-discrete-ttp.html">Haplotype Discrete Survival Models</a>
    </li>
    <li>
      <a href="../articles/interval-discrete-survival.html">Discrete Interval Censored Survival Models</a>
    </li>
    <li>
      <a href="../articles/marginal-cox.html">Marginal modelling of clustered survival data</a>
    </li>
    <li>
      <a href="../articles/mediation-survival.html">Mediation Analysis for survival data</a>
    </li>
    <li>
      <a href="../articles/quantitative-twin.html">Twin models</a>
    </li>
    <li>
      <a href="../articles/recurrent-events.html">Recurrent events</a>
    </li>
    <li>
      <a href="../articles/time-to-event-family-studies-arev.html">A practical guide to Human Genetics with Lifetime Data</a>
    </li>
    <li>
      <a href="../articles/twostage-survival.html">Analysis of multivariate survival data</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/kkholst/mets/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors</h1>
    <small class="dont-index">Source: <a href="https://github.com/kkholst/mets/blob/HEAD/R/phreg.R" class="external-link"><code>R/phreg.R</code></a></small>
    <div class="hidden name"><code>resmean.phreg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale 
standard error. Standard error is computed using linear interpolation between 
standard errors at jump-times. Plots gives restricted mean at all times. 
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on  
integrating the cumulative incidence functions.  
One particular feature of these functions are that the restricted mean and years-lost are 
computed for all event times as functions and can be viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of 
cumulative incidence.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">x</span>, times <span class="op">=</span> <span class="cn">NULL</span>, covs <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>phreg object</p></dd>


<dt>times</dt>
<dd><p>possible times for which to report restricted mean</p></dd>


<dt>covs</dt>
<dd><p>possible covariate for Cox model</p></dd>


<dt>...</dt>
<dd><p>Additional arguments to lower level funtions</p></dd>

</dl></div>
    <div id="author">
    <h2>Author</h2>
    <p>Thomas Scheike</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="phreg.html">phreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rm1</span> <span class="op">&lt;-</span> <span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">out1</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">rm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    strata times     rmean  se.rmean years.lost</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       0    10  5.863050 0.2566119   4.136950</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       1    10  7.631757 0.3424074   2.368243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       2    10  7.277346 0.7093264   2.722654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       3    10  7.669918 0.5624944   2.330082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       0    20  9.888631 0.5394004  10.111369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       1    20 13.506217 0.8000476   6.493783</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       2    20 12.102731 1.5546084   7.897269</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       3    20 12.787468 1.4676323   7.212532</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       0    30 13.602617 0.8315574  16.397383</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      1    30 18.901035 1.2693520  11.098965</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      2    30 16.190871 2.4006621  13.809129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      3    30 17.765823 2.4422550  12.234177</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      0    40 17.160100 1.1236398  22.839900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      1    40 23.883415 1.7373243  16.116585</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      2    40 19.548899 3.2031345  20.451101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      3    40 22.433031 3.3838904  17.566969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      0    50 20.483563 1.4111086  29.516437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      1    50 28.330437 2.1961970  21.669563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      2    50 22.745702 4.0537516  27.254298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      3    50 26.115307 4.2307326  23.884693</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21      0    60 23.743507 1.7038439  36.256493</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22      1    60 32.770963 2.6865996  27.229037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23      2    60 25.942506 4.9476464  34.057494</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24      3    60 29.671275 5.1599673  30.328725</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,years.lost<span class="op">=</span><span class="cn">TRUE</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="resmean.phreg-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## years.lost decomposed into causes</span></span></span>
<span class="r-in"><span><span class="va">drm1</span> <span class="op">&lt;-</span> <span class="fu">cif.yearslost</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span><span class="op">~</span><span class="va">cause</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    strata times    intF11     intF12 se.intF11 se.intF12 total.years.lost</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       0    10  3.117942  1.0190078 0.2487326 0.1703753         4.136950</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       1    10  1.711036  0.6572070 0.3238587 0.1870736         2.368243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       2    10  1.876269  0.8463846 0.6339430 0.4726707         2.722654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       3    10  1.358731  0.9713503 0.5303498 0.3617722         2.330082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       0    20  7.517800  2.5935697 0.5441291 0.3861383        10.111369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       1    20  4.231070  2.2627132 0.7414284 0.5327789         6.493783</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       2    20  4.568577  3.3286923 1.4877180 1.1718793         7.897269</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       3    20  3.569616  3.6429162 1.3003459 1.1907077         7.212532</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       0    30 12.105362  4.2920202 0.8508263 0.6161563        16.397383</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      1    30  6.884307  4.2146582 1.1741215 0.9057237        11.098965</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      2    30  7.260885  6.5482448 2.3533282 1.9703841        13.809129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      3    30  5.780500  6.4536769 2.0925434 2.0815688        12.234177</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      0    40 16.718881  6.1210188 1.1626433 0.8510089        22.839900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      1    40  9.728141  6.3884444 1.6095184 1.2998537        16.116585</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      2    40  9.953192 10.4979084 3.2212466 2.8144549        20.451101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      3    40  8.302532  9.2644375 2.8718357 2.9841352        17.566969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      0    50 21.368083  8.1483534 1.4766620 1.0944650        29.516437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      1    50 12.979400  8.6901632 2.0475367 1.7124623        21.669563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      2    50 12.645500 14.6087975 4.0900040 3.7303078        27.254298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      3    50 11.809495 12.0751982 3.6737298 3.8902683        23.884693</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21      0    60 26.017285 10.2392080 1.7930574 1.3469902        36.256493</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22      1    60 16.237155 10.9918820 2.5097629 2.1390116        27.229037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23      2    60 15.337808 18.7196866 4.9591596 4.6874315        34.057494</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24      3    60 15.442767 14.8859589 4.5900100 4.7979478        30.328725</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Klaus K. Holst, Thomas Scheike.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

