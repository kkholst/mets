<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg • mets</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg"><meta property="og:description" content="Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale 
standard error. Standard error is computed using linear interpolation between 
standard errors at jump-times. Plots gives restricted mean at all times. 
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on  
integrating the cumulative incidence functions.  
One particular feature of these functions are that the restricted mean and years-lost are 
computed for all event times as functions and can be viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of 
cumulative incidence."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/basic-dutils.html">dUtility data-frame manipulations</a>
    </li>
    <li>
      <a href="../articles/binomial-family.html">Analysis of multivariate binomial data: family analysis</a>
    </li>
    <li>
      <a href="../articles/binomial-twin.html">Analysis of bivariate binomial data: Twin analysis</a>
    </li>
    <li>
      <a href="../articles/binreg-ate.html">Average treatment effect (ATE) for Competing risks and binary outcomes</a>
    </li>
    <li>
      <a href="../articles/binreg.html">Binomial Regression</a>
    </li>
    <li>
      <a href="../articles/cifreg.html">Cumulative Incidence Regression</a>
    </li>
    <li>
      <a href="../articles/haplo-discrete-ttp.html">Haplotype Discrete Survival Models</a>
    </li>
    <li>
      <a href="../articles/interval-discrete-survival.html">Discrete Interval Censored Survival Models</a>
    </li>
    <li>
      <a href="../articles/marginal-cox.html">Marginal modelling of clustered survival data</a>
    </li>
    <li>
      <a href="../articles/mediation-survival.html">Mediation Analysis for survival data</a>
    </li>
    <li>
      <a href="../articles/quantitative-twin.html">Twin models</a>
    </li>
    <li>
      <a href="../articles/recurrent-events.html">Recurrent events</a>
    </li>
    <li>
      <a href="../articles/rmst-ate.html">Average treatment effect (ATE) for Restricted mean survival and years lost of Competing risks</a>
    </li>
    <li>
      <a href="../articles/survival-ate.html">Average treatment effect (ATE) based on the Cox and Fine-Gray model</a>
    </li>
    <li>
      <a href="../articles/time-to-event-family-studies-arev.html">A practical guide to Human Genetics with Lifetime Data</a>
    </li>
    <li>
      <a href="../articles/twostage-survival.html">Analysis of multivariate survival data</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/kkholst/mets/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors</h1>
    <small class="dont-index">Source: <a href="https://github.com/kkholst/mets/blob/HEAD/R/phreg.R" class="external-link"><code>R/phreg.R</code></a></small>
    <div class="hidden name"><code>resmean.phreg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale 
standard error. Standard error is computed using linear interpolation between 
standard errors at jump-times. Plots gives restricted mean at all times. 
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on  
integrating the cumulative incidence functions.  
One particular feature of these functions are that the restricted mean and years-lost are 
computed for all event times as functions and can be viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of 
cumulative incidence.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">x</span>, times <span class="op">=</span> <span class="cn">NULL</span>, covs <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>phreg object</p></dd>


<dt>times</dt>
<dd><p>possible times for which to report restricted mean</p></dd>


<dt>covs</dt>
<dd><p>possible covariate for Cox model</p></dd>


<dt>...</dt>
<dd><p>Additional arguments to lower level funtions</p></dd>

</dl></div>
    <div id="author">
    <h2>Author</h2>
    <p>Thomas Scheike</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">)</span>; <span class="va">bmt</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="va">bmt</span><span class="op">$</span><span class="va">time</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">408</span><span class="op">)</span><span class="op">*</span><span class="fl">0.001</span></span></span>
<span class="r-in"><span><span class="va">out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="phreg.html">phreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rm1</span> <span class="op">&lt;-</span> <span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">out1</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">rm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    strata times     rmean  se.rmean years.lost</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       0    10  5.863354 0.2565966   4.136646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       1    10  7.631957 0.3423816   2.368043</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       2    10  7.277517 0.7093035   2.722483</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       3    10  7.670127 0.5624531   2.329873</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       0    20  9.888968 0.5393850  10.111032</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       1    20 13.506447 0.8000209   6.493553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       2    20 12.102933 1.5545779   7.897067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       3    20 12.787717 1.4675866   7.212283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       0    30 13.602958 0.8315412  16.397042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      1    30 18.901294 1.2693261  11.098706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      2    30 16.191123 2.4006349  13.808877</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      3    30 17.766072 2.4422064  12.233928</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      0    40 17.159971 1.1235960  22.840029</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      1    40 23.883691 1.7372980  16.116309</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      2    40 19.549152 3.2031034  20.450848</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      3    40 22.433310 3.3838446  17.566690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      0    50 20.482481 1.4110531  29.517519</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      1    50 28.330736 2.1961708  21.669264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      2    50 22.745956 4.0537189  27.254044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      3    50 26.115643 4.2306906  23.884357</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21      0    60 23.741490 1.7038093  36.258510</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22      1    60 32.771263 2.6865723  27.228737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23      2    60 25.942759 4.9476129  34.057241</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24      3    60 29.671611 5.1599196  30.328389</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,years.lost<span class="op">=</span><span class="cn">TRUE</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="resmean.phreg-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## years.lost decomposed into causes</span></span></span>
<span class="r-in"><span><span class="va">drm1</span> <span class="op">&lt;-</span> <span class="fu">cif.yearslost</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    strata times    intF11     intF12 se.intF11 se.intF12 total.years.lost</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       0    10  3.117721  1.0189259 0.2487172 0.1703637         4.136646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       1    10  1.710902  0.6571412 0.3238339 0.1870585         2.368043</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       2    10  1.876183  0.8463004 0.6339150 0.4726550         2.722483</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       3    10  1.358662  0.9712110 0.5303236 0.3617207         2.329873</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       0    20  7.517555  2.5934768 0.5441131 0.3861256        10.111032</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       1    20  4.230928  2.2626244 0.7414037 0.5327600         6.493553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       2    20  4.568491  3.3285767 1.4876898 1.1718480         7.897067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       3    20  3.569547  3.6427359 1.3003201 1.1906520         7.212283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       0    30 12.105118  4.2919247 0.8508097 0.6161431        16.397042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      1    30  6.884158  4.2145485 1.1740973 0.9057032        11.098706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      2    30  7.260798  6.5480781 2.3533001 1.9703499        13.808877</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      3    30  5.780431  6.4534965 2.0925180 2.0815111        12.233928</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      0    40 16.718626  6.1214025 1.1626269 0.8509974        22.840029</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      1    40  9.727989  6.3883195 1.6094939 1.2998319        16.116309</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      2    40  9.953106 10.4977415 3.2212185 2.8144166        20.450848</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      3    40  8.302432  9.2642572 2.8718108 2.9840769        17.566690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      0    50 21.367810  8.1497083 1.4766452 1.0945189        29.517519</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      1    50 12.979225  8.6900383 2.0475120 1.7124395        21.669264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      2    50 12.645414 14.6086306 4.0899760 3.7302682        27.254044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      3    50 11.809339 12.0750179 3.6737012 3.8902098        23.884357</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21      0    60 26.016995 10.2415156 1.7930396 1.3471498        36.258510</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22      1    60 16.236980 10.9917572 2.5097374 2.1389883        27.228737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23      2    60 15.337722 18.7195197 4.9591316 4.6873915        34.057241</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24      3    60 15.442610 14.8857786 4.5899743 4.7978891        30.328389</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Klaus K. Holst, Thomas Scheike.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

