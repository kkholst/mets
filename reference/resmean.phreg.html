<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg • mets</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg"><meta name="description" content="Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence."><meta property="og:description" content="Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basic-dutils.html">dUtility data-frame manipulations</a></li>
    <li><a class="dropdown-item" href="../articles/binomial-family.html">Analysis of multivariate binomial data: family analysis</a></li>
    <li><a class="dropdown-item" href="../articles/binomial-twin.html">Analysis of bivariate binomial data: Twin analysis</a></li>
    <li><a class="dropdown-item" href="../articles/binreg-ate.html">Average treatment effect (ATE) for Competing risks and binary outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/binreg-TRS.html">Two-Stage Randomization for for Competing risks and Survival outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/binreg.html">Binomial Regression for Survival and Competing Risks Data</a></li>
    <li><a class="dropdown-item" href="../articles/cifreg.html">Cumulative Incidence Regression</a></li>
    <li><a class="dropdown-item" href="../articles/cooking-survival-data.html">WIP: Cooking survival data, 5 minute recipes</a></li>
    <li><a class="dropdown-item" href="../articles/glm-utility.html">GEE cluster standard errors and predictions for glm objects</a></li>
    <li><a class="dropdown-item" href="../articles/haplo-discrete-ttp.html">Haplotype Discrete Survival Models</a></li>
    <li><a class="dropdown-item" href="../articles/interval-discrete-survival.html">Discrete Interval Censored Survival Models</a></li>
    <li><a class="dropdown-item" href="../articles/marginal-cox.html">Marginal modelling of clustered survival data</a></li>
    <li><a class="dropdown-item" href="../articles/mediation-survival.html">Mediation Analysis for survival data</a></li>
    <li><a class="dropdown-item" href="../articles/phreg_rct.html">Randomization for Cox Type rate models </a></li>
    <li><a class="dropdown-item" href="../articles/quantitative-twin.html">Twin models</a></li>
    <li><a class="dropdown-item" href="../articles/recurrent-events.html">Recurrent events</a></li>
    <li><a class="dropdown-item" href="../articles/rmst-ate.html">Average treatment effect (ATE) for Restricted mean survival and years lost of Competing risks</a></li>
    <li><a class="dropdown-item" href="../articles/survival-ate.html">G-Computation or standardization for the Cox, Fine-Gray and binomial regression models for survival data</a></li>
    <li><a class="dropdown-item" href="../articles/time-to-event-family-studies-arev.html">A practical guide to Human Genetics with Lifetime Data</a></li>
    <li><a class="dropdown-item" href="../articles/twostage-survival.html">Analysis of multivariate survival data</a></li>
    <li><a class="dropdown-item" href="../articles/while-alive.html">While Alive estimands for Recurrent Events</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kkholst/mets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors</h1>
      <small class="dont-index">Source: <a href="https://github.com/kkholst/mets/blob/main/R/phreg.R" class="external-link"><code>R/phreg.R</code></a></small>
      <div class="d-none name"><code>resmean.phreg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">x</span>, times <span class="op">=</span> <span class="cn">NULL</span>, covs <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>phreg object</p></dd>


<dt id="arg-times">times<a class="anchor" aria-label="anchor" href="#arg-times"></a></dt>
<dd><p>possible times for which to report restricted mean</p></dd>


<dt id="arg-covs">covs<a class="anchor" aria-label="anchor" href="#arg-covs"></a></dt>
<dd><p>possible covariate for Cox model</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to lower level funtions</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Thomas Scheike</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kkholst.github.io/mets/" class="external-link">mets</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">)</span>; <span class="va">bmt</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="va">bmt</span><span class="op">$</span><span class="va">time</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">408</span><span class="op">)</span><span class="op">*</span><span class="fl">0.001</span></span></span>
<span class="r-in"><span><span class="va">out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="phreg.html">phreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rm1</span> <span class="op">&lt;-</span> <span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">out1</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">rm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       strata times     rmean  se.rmean     lower     upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0        0    10  5.863334 0.2565972  5.381378  6.388454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1        1    10  7.631962 0.3423844  6.989557  8.333409</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0        2    10  7.277547 0.7092878  6.012081  8.809378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1        3    10  7.670151 0.5624447  6.643335  8.855675</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1      0    20  9.888950 0.5393859  8.886321 11.004704</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1      1    20 13.506451 0.8000225 12.026032 15.169111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1      2    20 12.102974 1.5545669  9.409347 15.567709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1      3    20 12.787703 1.4675824 10.211846 16.013298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2      0    30 13.602941 0.8315422 12.066997 15.334387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2      1    30 18.901103 1.2693108 16.570072 21.560058</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2      2    30 16.191150 2.4006235 12.107990 21.651268</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2      3    30 17.766058 2.4422068 13.570032 23.259549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3      0    40 17.159947 1.1235964 15.093192 19.509708</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3      1    40 23.880230 1.7372347 20.706917 27.539849</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3      2    40 19.549194 3.2030958 14.179509 26.952342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3      3    40 22.433326 3.3838505 16.691606 30.150130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4      0    50 20.482456 1.4110537 17.895426 23.443477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4      1    50 28.324342 2.1962403 24.330921 32.973202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4      2    50 22.745997 4.0537112 16.040092 32.255450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4      3    50 26.115635 4.2306912 19.011102 35.875163</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5      0    60 23.741470 1.7038104 20.626283 27.327142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5      1    60 32.761949 2.6868298 27.897296 38.474886</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5      2    60 25.942800 4.9476052 17.851818 37.700861</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5      3    60 29.671603 5.1599206 21.101641 41.722064</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       years.lost</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0     4.136666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1     2.368038</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0     2.722453</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1     2.329849</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1  10.111050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1   6.493549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1   7.897026</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1   7.212297</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2  16.397059</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2  11.098897</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2  13.808850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2  12.233942</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3  22.840053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3  16.119770</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3  20.450806</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3  17.566674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4  29.517544</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4  21.675658</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4  27.254003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4  23.884365</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5  36.258530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5  27.238051</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5  34.057200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5  30.328397</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,years.lost<span class="op">=</span><span class="cn">TRUE</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="resmean.phreg-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## comparing populations, can also be done using rmstIPCW via influence functions</span></span></span>
<span class="r-in"><span><span class="va">rm1</span> <span class="op">&lt;-</span> <span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">out1</span>,times<span class="op">=</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">rm1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Estimate Std.Err  2.5% 97.5%   P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p1    17.16   1.124 14.96 19.36 1.169e-52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p2    23.88   1.737 20.48 27.29 5.374e-43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p3    19.55   3.203 13.27 25.83 1.040e-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p4    22.43   3.384 15.80 29.07 3.368e-11</span>
<span class="r-in"><span><span class="fu"><a href="https://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">e1</span>,<span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std.Err   2.5%  97.5%  P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [p1] - [p2]    -6.72   2.069 -10.78 -2.665 0.001161</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Null Hypothesis: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [p1] - [p2] = 0 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## years.lost decomposed into causes</span></span></span>
<span class="r-in"><span><span class="va">drm1</span> <span class="op">&lt;-</span> <span class="fu">cif.yearslost</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">drm1</span>,cause<span class="op">=</span><span class="fl">1</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">drm1</span>,cause<span class="op">=</span><span class="fl">2</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span>;</span></span>
<span class="r-plt img"><img src="resmean.phreg-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       strata times    intF_1     intF_2 se.intF_1 se.intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0        0    10  3.117736  1.0189303 0.2487181 0.1703638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1        1    10  1.710919  0.6571189 0.3238389 0.1870534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0        2    10  1.876128  0.8463247 0.6339008 0.4726505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1        3    10  1.358619  0.9712306 0.5303101 0.3617258</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1      0    20  7.517574  2.5934760 0.5441141 0.3861258</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1      1    20  4.230933  2.2626159 0.7414077 0.5327563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1      2    20  4.568436  3.3285906 1.4876734 1.1718504</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1      3    20  3.569503  3.6427943 1.3003048 1.1906650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2      0    30 12.105137  4.2919222 0.8508109 0.6161432</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2      1    30  6.884351  4.2145454 1.1740900 0.9057005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2      2    30  7.260743  6.5481063 2.3532831 1.9703533</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2      3    30  5.780387  6.4535549 2.0925023 2.0815282</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3      0    40 16.718644  6.1214091 1.1626282 0.8509973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3      1    40  9.731560  6.3882101 1.6095851 1.2998270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3      2    40  9.953051 10.4977551 3.2212013 2.8144216</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3      3    40  8.302359  9.2643156 2.8717953 2.9840956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4      0    50 21.367828  8.1497159 1.4766465 1.0945192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4      1    50 12.985924  8.6897341 2.0479350 1.7124152</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4      2    50 12.645359 14.6086442 4.0899587 3.7302723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4      3    50 11.809289 12.0750763 3.6736823 3.8902292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5      0    60 26.017013 10.2415177 1.7930408 1.3471502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5      1    60 16.246793 10.9912582 2.5105732 2.1389316</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5      2    60 15.337666 18.7195333 4.9591142 4.6873951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5      3    60 15.442561 14.8858369 4.5899564 4.7979091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       total.years.lost lower_intF_1 upper_intF_1 lower_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0           4.136666    2.6664563     3.645391    0.7342174</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1           2.368038    1.1806362     2.479380    0.3761349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0           2.722453    0.9675221     3.638011    0.2832454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1           2.329849    0.6321902     2.919761    0.4680587</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1        10.111050    6.5233192     8.663368    1.9371014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1         6.493549    3.0010682     5.964809    1.4262203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1         7.897026    2.4131302     8.648768    1.6695128</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1         7.212297    1.7479562     7.289285    1.9196201</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2        16.397059   10.5473388    13.893015    3.2393239</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2        11.098897    4.9282764     9.616809    2.7658498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2        13.808850    3.8467834    13.704539    3.6306595</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2        12.233942    2.8432933    11.751470    3.4296725</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3        22.840053   14.5884048    19.159947    4.6614122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3        16.119770    7.0371214    13.457671    4.2872897</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3        20.450806    5.2780526    18.768897    6.2071388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3        17.566674    4.2147313    16.354342    4.9276047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4        29.517544   18.6610984    24.467161    6.2636115</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4        21.675658    9.5331137    17.689311    5.9056422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4        27.254003    6.7084519    23.836364    8.8564203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4        23.884365    6.4184249    21.727964    6.4218203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5        36.258530   22.7297317    29.779716    7.9140511</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5        27.238051   12.0014512    21.993864    7.5058702</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5        34.057200    8.1384377    28.905303   11.4591673</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5        30.328397    8.6241967    27.651581    7.9144246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       upper_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0       1.414048</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1       1.148006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0       2.528781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1       2.015322</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1     3.472259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1     3.589509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1     6.636376</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1     6.912800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2     5.686556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2     6.422038</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2    11.809892</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2    12.143542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3     8.038690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3     9.518654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3    17.754213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3    17.417701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4    10.603766</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4    12.786328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4    24.096924</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4    22.705006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5    13.253476</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5    16.095103</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5    30.579964</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5    27.998010</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## comparing populations, can also be done using rmstIPCW via influence functions</span></span></span>
<span class="r-in"><span><span class="va">drm1</span> <span class="op">&lt;-</span> <span class="fu">cif.yearslost</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span>,times<span class="op">=</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     strata times    intF_1    intF_2 se.intF_1 se.intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0      0    40 16.718644  6.121409  1.162628 0.8509973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1      1    40  9.731560  6.388210  1.609585 1.2998270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0      2    40  9.953051 10.497755  3.221201 2.8144216</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1      3    40  8.302359  9.264316  2.871795 2.9840956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     total.years.lost lower_intF_1 upper_intF_1 lower_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0         22.84005    14.588405     19.15995     4.661412</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1         16.11977     7.037121     13.45767     4.287290</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0         20.45081     5.278053     18.76890     6.207139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1         17.56667     4.214731     16.35434     4.927605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     upper_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0     8.038690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1     9.518654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0    17.754213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1    17.417701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## first cause </span></span></span>
<span class="r-in"><span><span class="va">e1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">e1</span>,<span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std.Err  2.5% 97.5%   P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [p1] - [p2]    6.987   1.986 3.095 10.88 0.0004333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Null Hypothesis: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [p1] - [p2] = 0 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Klaus K. Holst, Thomas Scheike.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

