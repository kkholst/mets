<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg • mets</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors — resmean.phreg"><meta name="description" content="Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence."><meta property="og:description" content="Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence."><meta property="og:image" content="http://kkholst.github.io/mets/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/basic-dutils.html">dUtility data-frame manipulations</a></li>
    <li><a class="dropdown-item" href="../articles/binomial-family.html">Analysis of multivariate binomial data: family analysis</a></li>
    <li><a class="dropdown-item" href="../articles/binomial-twin.html">Analysis of bivariate binomial data: Twin analysis</a></li>
    <li><a class="dropdown-item" href="../articles/binreg-ate.html">Average treatment effect (ATE) for Competing risks and binary outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/binreg-TRS.html">Two-Stage Randomization for for Competing risks and Survival outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/binreg.html">Binomial Regression for Survival and Competing Risks Data</a></li>
    <li><a class="dropdown-item" href="../articles/cifreg.html">Cumulative Incidence Regression</a></li>
    <li><a class="dropdown-item" href="../articles/cooking-survival-data.html">WIP: Cooking survival data, 5 minute recipes</a></li>
    <li><a class="dropdown-item" href="../articles/glm-utility.html">GEE cluster standard errors and predictions for glm objects</a></li>
    <li><a class="dropdown-item" href="../articles/haplo-discrete-ttp.html">Haplotype Discrete Survival Models</a></li>
    <li><a class="dropdown-item" href="../articles/interval-discrete-survival.html">Discrete Interval Censored Survival Models</a></li>
    <li><a class="dropdown-item" href="../articles/marginal-cox.html">Marginal modelling of clustered survival data</a></li>
    <li><a class="dropdown-item" href="../articles/mediation-survival.html">Mediation Analysis for survival data</a></li>
    <li><a class="dropdown-item" href="../articles/phreg_rct.html">Randomization for Cox Type rate models </a></li>
    <li><a class="dropdown-item" href="../articles/quantitative-twin.html">Twin models</a></li>
    <li><a class="dropdown-item" href="../articles/recurrent-events.html">Recurrent events</a></li>
    <li><a class="dropdown-item" href="../articles/rmst-ate.html">Average treatment effect (ATE) for Restricted mean survival and years lost of Competing risks</a></li>
    <li><a class="dropdown-item" href="../articles/survival-ate.html">G-Computation or standardization for the Cox, Fine-Gray and binomial regression models for survival data</a></li>
    <li><a class="dropdown-item" href="../articles/time-to-event-family-studies-arev.html">A practical guide to Human Genetics with Lifetime Data</a></li>
    <li><a class="dropdown-item" href="../articles/twostage-survival.html">Analysis of multivariate survival data</a></li>
    <li><a class="dropdown-item" href="../articles/while-alive.html">While Alive estimands for Recurrent Events</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/kkholst/mets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Restricted mean for stratified Kaplan-Meier or Cox model with martingale standard errors</h1>
      <small class="dont-index">Source: <a href="https://github.com/kkholst/mets/blob/main/R/phreg.R" class="external-link"><code>R/phreg.R</code></a></small>
      <div class="d-none name"><code>resmean.phreg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Restricted mean for stratified Kaplan-Meier or stratified Cox with martingale
standard error. Standard error is computed using linear interpolation between
standard errors at jump-times. Plots gives restricted mean at all times.
Years lost can be computed based on this and decomposed into years lost for
different causes using the cif.yearslost function that is based on
integrating the cumulative incidence functions.
One particular feature of these functions are that the restricted mean and years-lost are
computed for all event times as functions and can be plotted/viewed.  When times are given and beyond
the last event time withn a strata the curves are extrapolated using the estimates of
cumulative incidence.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">x</span>, times <span class="op">=</span> <span class="cn">NULL</span>, covs <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>phreg object</p></dd>


<dt id="arg-times">times<a class="anchor" aria-label="anchor" href="#arg-times"></a></dt>
<dd><p>possible times for which to report restricted mean</p></dd>


<dt id="arg-covs">covs<a class="anchor" aria-label="anchor" href="#arg-covs"></a></dt>
<dd><p>possible covariate for Cox model</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to lower level funtions</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Thomas Scheike</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kkholst.github.io/mets/" class="external-link">mets</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">)</span>; <span class="va">bmt</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="va">bmt</span><span class="op">$</span><span class="va">time</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">408</span><span class="op">)</span><span class="op">*</span><span class="fl">0.001</span></span></span>
<span class="r-in"><span><span class="va">out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="phreg.html">phreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rm1</span> <span class="op">&lt;-</span> <span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">out1</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">rm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       strata times     rmean  se.rmean     lower     upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0        0    10  5.863348 0.2565969  5.381392  6.388468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1        1    10  7.631932 0.3423878  6.989521  8.333387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0        2    10  7.277571 0.7092918  6.012098  8.809410</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1        3    10  7.670168 0.5624467  6.643348  8.855697</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1      0    20  9.888956 0.5393851  8.886328 11.004709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1      1    20 13.506404 0.8000257 12.025979 15.169072</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1      2    20 12.102998 1.5545668  9.409371 15.567732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1      3    20 12.787751 1.4675791 10.211899 16.013337</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2      0    30 13.602943 0.8315414 12.067001 15.334387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2      1    30 18.901243 1.2693309 16.570176 21.560241</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2      2    30 16.191191 2.4006237 12.108029 21.651307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2      3    30 17.766106 2.4421997 13.570089 23.259577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3      0    40 17.159949 1.1235958 15.093195 19.509709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3      1    40 23.883651 1.7373041 20.710189 27.543389</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3      2    40 19.549224 3.2030928 14.179542 26.952361</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3      3    40 22.433334 3.3838371 16.691634 30.150103</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4      0    50 20.482459 1.4110533 17.895429 23.443479</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4      1    50 28.330696 2.1961763 24.337316 32.979329</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4      2    50 22.746027 4.0537082 16.040124 32.255470</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4      3    50 26.115671 4.2306850 19.011146 35.875180</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5      0    60 23.741473 1.7038101 20.626288 27.327145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5      1    60 32.771223 2.6865772 27.906884 38.483446</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5      2    60 25.942830 4.9476022 17.851850 37.700879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5      3    60 29.671639 5.1599146 21.101684 41.722081</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       years.lost</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0     4.136652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1     2.368068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0     2.722429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1     2.329832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1  10.111044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1   6.493596</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1   7.897002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1   7.212249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2  16.397057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2  11.098757</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2  13.808809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2  12.233894</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3  22.840051</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3  16.116349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3  20.450776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3  17.566666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4  29.517541</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4  21.669304</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4  27.253973</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4  23.884329</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5  36.258527</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5  27.228777</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5  34.057170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5  30.328361</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rm1</span>,years.lost<span class="op">=</span><span class="cn">TRUE</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="resmean.phreg-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## comparing populations, can also be done using rmstIPCW via influence functions</span></span></span>
<span class="r-in"><span><span class="va">rm1</span> <span class="op">&lt;-</span> <span class="fu">resmean.phreg</span><span class="op">(</span><span class="va">out1</span>,times<span class="op">=</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e1</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">rm1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Estimate Std.Err  2.5% 97.5%   P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p1    17.16   1.124 14.96 19.36 1.169e-52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p2    23.88   1.737 20.48 27.29 5.269e-43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p3    19.55   3.203 13.27 25.83 1.039e-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p4    22.43   3.384 15.80 29.07 3.367e-11</span>
<span class="r-in"><span><span class="fu"><a href="http://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">e1</span>,<span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std.Err   2.5%  97.5%  P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [p1] - [p2]   -6.724   2.069 -10.78 -2.669 0.001155</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Null Hypothesis: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [p1] - [p2] = 0 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## years.lost decomposed into causes</span></span></span>
<span class="r-in"><span><span class="va">drm1</span> <span class="op">&lt;-</span> <span class="fu">cif.yearslost</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span>,times<span class="op">=</span><span class="fl">10</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">drm1</span>,cause<span class="op">=</span><span class="fl">1</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">drm1</span>,cause<span class="op">=</span><span class="fl">2</span>,se<span class="op">=</span><span class="fl">1</span><span class="op">)</span>;</span></span>
<span class="r-plt img"><img src="resmean.phreg-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       strata times    intF_1     intF_2 se.intF_1 se.intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0        0    10  3.117716  1.0189361 0.2487175 0.1703642</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1        1    10  1.710926  0.6571419 0.3238403 0.1870597</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0        2    10  1.876136  0.8462935 0.6339068 0.4726441</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1        3    10  1.358597  0.9712345 0.5303058 0.3617336</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1      0    20  7.517560  2.5934839 0.5441129 0.3861266</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1      1    20  4.230958  2.2626386 0.7414091 0.5327621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1      2    20  4.568444  3.3285585 1.4876774 1.1718411</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1      3    20  3.569482  3.6427672 1.3002981 1.1906629</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2      0    30 12.105122  4.2919342 0.8508098 0.6161442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2      1    30  6.884187  4.2145694 1.1741026 0.9057061</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2      2    30  7.260751  6.5480579 2.3532866 1.9703434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2      3    30  5.780366  6.4535279 2.0924951 2.0815219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3      0    40 16.718632  6.1214190 1.1626270 0.8509985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3      1    40  9.728009  6.3883401 1.6094993 1.2998358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3      2    40  9.953059 10.4977173 3.2212046 2.8144104</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3      3    40  8.302378  9.2642886 2.8717876 2.9840876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4      0    50 21.367817  8.1497247 1.4766454 1.0945204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4      1    50 12.979245  8.6900589 2.0475166 1.7124434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4      2    50 12.645367 14.6086064 4.0899618 3.7302619</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4      3    50 11.809280 12.0750492 3.6736800 3.8902204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5      0    60 26.017001 10.2415261 1.7930399 1.3471514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5      1    60 16.237000 10.9917777 2.5097415 2.1389922</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5      2    60 15.337674 18.7194955 4.9591172 4.6873852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5      3    60 15.442551 14.8858099 4.5899546 4.7978997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       total.years.lost lower_intF_1 upper_intF_1 lower_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0           4.136652    2.6664378     3.645370    0.7342225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1           2.368068    1.1806408     2.479390    0.3761484</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0           2.722429    0.9675227     3.638039    0.2832278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1           2.329832    0.6321767     2.919732    0.4680546</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1        10.111044    6.5233073     8.663352    1.9371079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1         6.493596    3.0010893     5.964835    1.4262341</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1         7.897002    2.4131328     8.648789    1.6694947</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1         7.212249    1.7479449     7.289246    1.9195989</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2        16.397057   10.5473267    13.892998    3.2393340</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2        11.098757    4.9281021     9.616691    2.7658651</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2        13.808809    3.8467866    13.704558    3.6306276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2        12.233894    2.8432825    11.751429    3.4296557</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3        22.840051   14.5883949    19.159933    4.6614199</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3        16.116349    7.0338426    13.454119    4.2874001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3        20.450776    5.2780561    18.768914    6.2071177</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3        17.566666    4.2147552    16.354324    4.9275895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4        29.517541   18.6610883    24.467147    6.2636181</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4        21.669304    9.5272969    17.681908    5.9059106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4        27.253973    6.7084554    23.836380    8.8563983</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4        23.884329    6.4184193    21.727949    6.4218060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5        36.258527   22.7297215    29.779702    7.9140574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5        27.228777   11.9932300    21.982415    7.5062792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5        34.057170    8.1384414    28.905320   11.4591447</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5        30.328361    8.6241905    27.651568    7.9144109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                       upper_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0       1.414055</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1       1.148046</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0       2.528752</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1       2.015356</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.1     3.472269</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.1     3.589546</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.1     6.636320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.1     6.912774</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.2     5.686570</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.2     6.422076</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.2    11.809821</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.2    12.143500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.3     8.038703</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.3     9.518797</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.3    17.754145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.3    17.417653</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.4    10.603777</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.4    12.786703</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.4    24.096859</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.4    22.704955</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.0.5    13.253487</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.0..platelet.1.5    16.095748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.0.5    30.579901</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell.1..platelet.1.5    27.997957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## comparing populations, can also be done using rmstIPCW via influence functions</span></span></span>
<span class="r-in"><span><span class="va">drm1</span> <span class="op">&lt;-</span> <span class="fu">cif.yearslost</span><span class="op">(</span><span class="fu"><a href="Event.html">Event</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">cause</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">tcell</span>,<span class="va">platelet</span><span class="op">)</span>,data<span class="op">=</span><span class="va">bmt</span>,times<span class="op">=</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     strata times    intF_1    intF_2 se.intF_1 se.intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0      0    40 16.718632  6.121419  1.162627 0.8509985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1      1    40  9.728009  6.388340  1.609499 1.2998358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0      2    40  9.953059 10.497717  3.221205 2.8144104</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1      3    40  8.302378  9.264289  2.871788 2.9840876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     total.years.lost lower_intF_1 upper_intF_1 lower_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0         22.84005    14.588395     19.15993     4.661420</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1         16.11635     7.033843     13.45412     4.287400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0         20.45078     5.278056     18.76891     6.207118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1         17.56667     4.214755     16.35432     4.927590</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     upper_intF_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=0     8.038703</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=0, platelet=1     9.518797</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=0    17.754145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tcell=1, platelet=1    17.417653</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co">## first cause </span></span></span>
<span class="r-in"><span><span class="va">e1</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">drm1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="http://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate</a></span><span class="op">(</span><span class="va">e1</span>,<span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std.Err  2.5% 97.5%   P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [p1] - [p2]    6.991   1.985 3.099 10.88 0.0004302</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Null Hypothesis: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [p1] - [p2] = 0 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Klaus K. Holst, Thomas Scheike.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

